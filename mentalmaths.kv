#:import FadeTransition kivy.uix.screenmanager.FadeTransition

<MenuList>
    id: "MenuList"
    name: "menulist"
    ScrollView:
        pos_hint: {"center_x": 0.5}
        bar_width: 0
        MDBoxLayout:
            adaptive_height: True
            orientation: "vertical"
            pos_hint: {"center_x": 0.5}

            MDBoxLayout:
                padding: "10dp"
                adaptive_size: True
                spacing: "10dp"
                orientation: "vertical"
                pos_hint: {"center_x": 0.5}

                MDBoxLayout:
                    adaptive_width: True
                    size_hint_y: None
                    height: "56dp"
                    spacing: "10dp"
                    pos_hint: {"center_x": .5}

                    MDRaisedButton:
                        text: 'Time Attack: Multiply By 11'
                        pos_hint: {"center_x": 0.5}
                        on_press:
                            app.root.ids.screen_manager.current = 'Multiply By 11'
                            app.set_game("Multiply By 11", "Time Attack")
                            app.launch_game()

                    MDRaisedButton:
                        text: 'Quiz: Multiply By 11'
                        pos_hint: {"center_x": 0.5}
                        on_press:
                            app.root.ids.screen_manager.current = 'Multiply By 11'
                            app.set_game("Multiply By 11", "Timed Quiz")
                            app.launch_game()

                MDBoxLayout:
                    adaptive_width: True
                    size_hint_y: None
                    height: "56dp"
                    spacing: "10dp"
                    pos_hint: {"center_x": .5}

                    MDRaisedButton:
                        text: 'Time Attack: Two digit addition'
                        pos_hint: {"center_x": 0.5}
                        on_press:
                            app.root.ids.screen_manager.current = "Two Digit Addition"
                            app.set_game("Two Digit Addition", "Time Attack")
                            app.launch_game()

                    MDRaisedButton:
                        text: 'Quiz: Two digit addition'
                        pos_hint: {"center_x": 0.5}
                        on_press:
                            app.root.ids.screen_manager.current = "Two Digit Addition"
                            app.set_game("Two Digit Addition", "Timed Quiz")
                            app.launch_game()

                MDBoxLayout:
                    adaptive_width: True
                    size_hint_y: None
                    height: "56dp"
                    spacing: "10dp"
                    pos_hint: {"center_x": .5}

                    MDRaisedButton:
                        text: 'Time Attack: Three by one digit multiplication'
                        pos_hint: {"center_x": 0.5}
                        on_press:
                            app.root.ids.screen_manager.current = "Three By One Digit Multiplication"
                            app.set_game("Three By One Digit Multiplication", "Time Attack")
                            app.launch_game()

                    MDRaisedButton:
                        text: 'Quiz: Three by one digit multiplication'
                        pos_hint: {"center_x": 0.5}
                        on_press:
                            app.root.ids.screen_manager.current = "Three By One Digit Multiplication"
                            app.set_game("Three By One Digit Multiplication", "Timed Quiz")
                            app.launch_game()

                MDBoxLayout:
                    adaptive_width: True
                    size_hint_y: None
                    height: "56dp"
                    spacing: "10dp"
                    pos_hint: {"center_x": .5}

                    MDRaisedButton:
                        text: 'Time Attack: Two digit multiplication'
                        pos_hint: {"center_x": 0.5}
                        on_press:
                            app.root.ids.screen_manager.current = "Two Digit Multiplication"
                            app.set_game("Two Digit Multiplication", "Time Attack")
                            app.launch_game()

                    MDRaisedButton:
                        text: 'Quiz: Two digit multiplication'
                        pos_hint: {"center_x": 0.5}
                        on_press:
                            app.root.ids.screen_manager.current = "Two Digit Multiplication"
                            app.set_game("Two Digit Multiplication", "Timed Quiz")
                            app.launch_game()


MDBoxLayout:

    ScreenManager:
        id: screen_manager
        transition: FadeTransition(duration=.2, clearcolor=app.theme_cls.bg_dark)

        MDScreen:
            id: home
            name: "home"

            MenuList:

            MDNavigationDrawer:
                id: nav_drawer

                size_hint: (0.3, 1)

                FloatLayout:
                    pos_hint: {"top": 1}
                    orientation: "vertical"

                    MDLabel:
                        pos_hint: {"center_x": .6, "center_y": .8}
                        text: "Dark Mode"

                    MDSwitch:
                        pos_hint: {"center_x": .75, "center_y": .8}
                        active: False
                        on_touch_up: app.light_dark_switch()

            MDToolbar:
                id: toolbar
                pos_hint: {"Bottom": 1}
                elevation: 10
                title: "Maths Dojo"
                left_action_items: [["menu", lambda x: nav_drawer.set_state(app.open_close_toolbar())]]

        GameScreen:
            id: MultiplyBy11
            name: "Multiply By 11"

        GameScreen:
            id: TwoDigitAddition
            name: "Two Digit Addition"

        GameScreen:
            id: ThreeByOneDigitMultiplication
            name: "Three By One Digit Multiplication"

        GameScreen:
            id: TwoDigitMultiplication
            name: "Two Digit Multiplication"



<GameScreen>
    MDLabel:
        id: prompt
        text: ""
        halign: "center"
        text_color: app.theme_cls.primary_dark
        pos_hint: {'center_x': 0.5, 'center_y': 0.6}

    MDTextField:
        id: PlayerInput
        hint_text: "Helper text on focus"
        helper_text: "This will disappear when you click off"
        helper_text_mode: "on_focus"
        pos_hint: {'center_x': 0.5, 'center_y': 0.3}
        text_validate_unfocus: False
        on_text_validate:
            app.game.player_input()

<MenuButton>
    text: "Menu"
    text_color: app.theme_cls.primary_color
    on_release:
        app.game.PopUp.dismiss()
        app.root.ids.screen_manager.current = "home"
        app.set_game("Maths Dojo", "Maths Dojo")

<PlayAgainButton>
    text: "Play Again"
    text_color: app.theme_cls.primary_color
    on_release:
        app.game.PopUp.dismiss()
        app.game.play_game()

<HelpButton>
    text: "Help"
    text_color: app.theme_cls.primary_color
    on_release:
        app.game.PopUp.dismiss()
        app.game.display_help()

<CloseButton>
    text: "Close"
    text_color: app.theme_cls.primary_color
    on_release:
        app.game.HelpPopUp.dismiss()
        app.game.PopUp.open()

<StartGameButton>
    text: "Start Game"
    text_color: app.theme_cls.primary_color
    on_release:
        app.game.PopUp.dismiss()
        app.game.play_game()
